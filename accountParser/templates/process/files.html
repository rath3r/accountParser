{% extends 'base.html' %}

{% block header %}
    <h2>{% block title %}Files{% endblock %}</h2>
{% endblock %}

{% block content %}
    <div class="row">
        <div class="col-lg-8">
            <p>These files are available to be processed:</p>
            <h3>Upload new File</h3>
            <form action="/process/files" method=post enctype=multipart/form-data>
                <div class="mb-3">
                    <input type=file class="form-control" name=file>
                </div>
                <div class="mb-3">
                    <button type=submit class="btn btn-primary">Upload</button>
                </div>
            </form>
            <p>Files:</p>
            {% if files|length > 0 %}
                <ul>
                    {% for file in files %}
                        <li>{{ file['title'] }}<a class="ms-2" href="/process/file?fileID={{ file['id'] }}">File Type</a><a class="ms-2" href="/process/entries?fileID={{ file['id'] }}">Entries</a><a class="ms-2" href="/process/categorize?fileID={{ file['id'] }}">Categorize</a></li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>There are no files uploaded yet.</p>
            {% endif %}
        </div>
        <div class="col">
            <p>Here are the links to the process pages</p>
            <p>The steps required to process a file are:</p>
            <ul>
                <li>Upload a file</li>
                <li>Identify what type of file</li>
                <li>Identify what needs to be done to each line to add it to the entries table</li>
                <li>Add each line to the entries table</li>
            </ul>
            <p>Should everything else be left to later?</p>
        </div>
    </div>
{% endblock %}
